# Mira 系统托盘图标使用指南

## 概述

Mira 应用启动后会在系统托盘（任务栏通知区域）显示一个**蓝色圆形图标**。通过右键点击该图标，您可以访问所有功能菜单。

## 如何找到托盘图标

### Windows
1. 启动 Mira 应用
2. 查看任务栏右下角的系统托盘区域
3. 如果没有看到蓝色圆形图标，点击 **"^"** 展开隐藏的图标
4. 找到 Mira 图标（蓝色圆形，代表摄像头镜头）

### macOS
1. 启动 Mira 应用
2. 查看屏幕右上角的菜单栏
3. 找到 Mira 图标（蓝色圆形）

### Linux
1. 启动 Mira 应用
2. 查看系统托盘区域（通常在屏幕顶部或底部）
3. 找到 Mira 图标（蓝色圆形）

## 使用托盘菜单

### 打开菜单
- **右键点击** 托盘图标即可显示功能菜单
- 菜单会显示在鼠标位置附近

### 菜单功能

#### 1. 形状选择
选择摄像头窗口的显示形状：
- **圆形 (F1)** - 标准圆形窗口
- **椭圆形 (F2)** - 椭圆形窗口
- **矩形 (F3)** - 矩形窗口
- **圆角矩形 (F4)** - 带圆角的矩形窗口
- **心形 (F5)** - 心形窗口

#### 2. 窗口控制
控制摄像头窗口的位置和状态：
- **重置位置** - 将窗口移动到默认位置 (100, 100)
- **重置旋转** - 将窗口旋转角度重置为 0°
- **重置大小** - 将窗口大小重置为 400x400

#### 3. 旋转控制
旋转摄像头窗口：
- **逆时针旋转 15°** - 向左旋转窗口（相当于 Ctrl+滚轮下）
- **顺时针旋转 15°** - 向右旋转窗口（相当于 Ctrl+滚轮上）

#### 4. 其他功能
- **显示信息** - 在控制台和日志中显示当前窗口状态信息（形状、尺寸、位置、旋转角度、摄像头设备）
- **退出** - 关闭 Mira 应用

## 键盘快捷键

除了使用托盘菜单，您还可以使用以下键盘快捷键：

### 形状切换
- **F1** - 切换到圆形
- **F2** - 切换到椭圆形
- **F3** - 切换到矩形
- **F4** - 切换到圆角矩形
- **F5** - 切换到心形
- **空格** - 循环切换所有形状

### 窗口操作
- **R** - 重置窗口位置、旋转和大小
- **Tab** - 切换摄像头设备（如果有多个摄像头）

### 鼠标操作
- **左键拖拽** - 移动窗口
- **滚轮向上** - 放大窗口 (+10%)
- **滚轮向下** - 缩小窗口 (-10%)
- **Ctrl + 滚轮向上** - 顺时针旋转 (+15°)
- **Ctrl + 滚轮向下** - 逆时针旋转 (-15°)

## 常见问题

### Q: 我看不到托盘图标怎么办？
**A**: 
1. 确认 Mira 应用已经启动（检查任务管理器）
2. Windows 用户：点击任务栏右下角的 **"^"** 展开隐藏图标
3. 检查日志文件，看是否有托盘图标初始化错误
4. 尝试重启应用

### Q: 右键点击托盘图标没有反应？
**A**: 
1. 确保点击的是 Mira 的蓝色圆形图标
2. 尝试左键点击看是否有反应
3. 检查日志文件中的错误信息
4. 重启应用

### Q: 托盘图标显示但菜单是空的？
**A**: 
1. 这可能是菜单初始化失败
2. 检查日志文件中的错误信息
3. 尝试使用键盘快捷键作为替代方案
4. 重启应用

### Q: 最小化窗口后如何恢复？
**A**: 
- 窗口最小化后，您可以通过托盘图标的菜单功能继续控制应用
- 使用 "重置位置" 功能可以让窗口重新显示在屏幕上
- 或者直接点击任务栏上的 Mira 窗口图标

### Q: 如何完全退出应用？
**A**: 
1. 右键点击托盘图标
2. 选择 "退出" 菜单项
3. 或者直接关闭摄像头窗口

## 技术说明

### 图标设计
- 尺寸：32x32 像素
- 格式：RGBA
- 颜色：蓝色圆形（RGB: 64, 128, 255）
- 边框：白色 2 像素

### 菜单事件处理
- 菜单事件通过 `tray-icon` crate 处理
- 事件在主事件循环中异步处理
- 所有菜单操作都会记录到日志文件

### 平台兼容性
- ✅ Windows 10/11
- ✅ macOS 10.14+
- ✅ Linux (需要系统托盘支持)

## 日志位置

如果遇到问题，可以查看日志文件：
- **Windows**: `%APPDATA%\Mira\logs\mira.log`
- **macOS**: `~/Library/Application Support/Mira/logs/mira.log`
- **Linux**: `~/.local/share/Mira/logs/mira.log`

## 反馈

如果托盘图标功能有任何问题，请：
1. 查看日志文件
2. 记录问题发生的步骤
3. 提交问题报告并附上日志文件
